{"ast":null,"code":"import _regeneratorRuntime from\"/Users/saadamirpk/Documents/GitHub/eth-live/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"/Users/saadamirpk/Documents/GitHub/eth-live/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/Users/saadamirpk/Documents/GitHub/eth-live/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/saadamirpk/Documents/GitHub/eth-live/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import Chart from\"react-apexcharts\";import{jsx as _jsx}from\"react/jsx-runtime\";function CandleStickChart(props){var _useState=useState({chart:{type:\"candlestick\"},title:{text:\"USDT - ETH CandleStick Chart\",align:\"left\"},xaxis:{type:\"datetime\"},yaxis:{tooltip:{enabled:true},labels:{formatter:function formatter(value){return\"$\"+value;}}}}),_useState2=_slicedToArray(_useState,2),options=_useState2[0],setOptions=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),series=_useState4[0],setSeries=_useState4[1];useEffect(function(){loadData();},[]);var loadData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,dataPoints,fulldataArr;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"https://poloniex.com/public?command=returnChartData&currencyPair=USDT_ETH&start=1608336000&end=9999999999&period=86400\");case 2:response=_context.sent;_context.next=5;return response.json();case 5:dataPoints=_context.sent;fulldataArr=dataPoints.map(function(point){var dateMsStr=point.date.toString()+\"000\";return{x:new Date(Number.parseInt(dateMsStr)),y:[point.open,point.high,point.low,point.close]};});//const quarterDataArr = extractData(dataPoints);\nsetSeries([{data:_toConsumableArray(fulldataArr)}]);case 8:case\"end\":return _context.stop();}}},_callee);}));return function loadData(){return _ref.apply(this,arguments);};}();function extractData(dataPoints){var arr=[];var totalData=dataPoints.length;var startPoint=Math.round(totalData/4*3);for(var i=startPoint;i<totalData;i++){arr.push({x:new Date(dataPoints[i].date),y:[dataPoints[i].open,dataPoints[i].high,dataPoints[i].low,dataPoints[i].close]});}return arr;}return/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"mixed-chart\",children:/*#__PURE__*/_jsx(Chart,{options:options,series:series,type:\"candlestick\"})})});}export default CandleStickChart;","map":{"version":3,"names":["React","useEffect","useState","Chart","CandleStickChart","props","chart","type","title","text","align","xaxis","yaxis","tooltip","enabled","labels","formatter","value","options","setOptions","series","setSeries","loadData","fetch","response","json","dataPoints","fulldataArr","map","point","dateMsStr","date","toString","x","Date","Number","parseInt","y","open","high","low","close","data","extractData","arr","totalData","length","startPoint","Math","round","i","push"],"sources":["/Users/saadamirpk/Documents/GitHub/eth-live/src/Components/CandleStickChart.tsx"],"sourcesContent":["import { ApexOptions } from \"apexcharts\";\nimport React, { Component, useEffect, useState } from \"react\";\nimport Chart from \"react-apexcharts\";\n\nfunction CandleStickChart(props: any) {\n  const [options, setOptions] = useState<ApexOptions>({\n    chart: {\n      type: \"candlestick\",\n    },\n    title: {\n      text: \"USDT - ETH CandleStick Chart\",\n      align: \"left\",\n    },\n    xaxis: {\n      type: \"datetime\",\n    },\n    yaxis: {\n      tooltip: {\n        enabled: true,\n      },\n      labels: {\n        formatter: function (value) {\n          return \"$\" + value;\n        },\n      },\n    },\n  });\n\n  const [series, setSeries] = useState<ApexAxisChartSeries>([]);\n\n  useEffect(() => {\n    loadData();\n  }, []);\n\n  const loadData = async () => {\n    const response = await fetch(\n      \"https://poloniex.com/public?command=returnChartData&currencyPair=USDT_ETH&start=1608336000&end=9999999999&period=86400\"\n    );\n    const dataPoints = await response.json();\n\n    const fulldataArr = dataPoints.map((point: any) => {\n      const dateMsStr = point.date.toString() + \"000\";\n      return {\n        x: new Date(Number.parseInt(dateMsStr)),\n        y: [point.open, point.high, point.low, point.close],\n      };\n    });\n\n    //const quarterDataArr = extractData(dataPoints);\n\n    setSeries([\n      {\n        data: [...fulldataArr],\n      },\n    ]);\n  };\n\n  function extractData(dataPoints: any[]) {\n    let arr: any[] = [];\n    const totalData = dataPoints.length;\n    const startPoint = Math.round((totalData / 4) * 3);\n    for (let i = startPoint; i < totalData; i++) {\n      arr.push({\n        x: new Date(dataPoints[i].date),\n        y: [\n          dataPoints[i].open,\n          dataPoints[i].high,\n          dataPoints[i].low,\n          dataPoints[i].close,\n        ],\n      });\n    }\n    return arr;\n  }\n\n  return (\n    <div className=\"row\">\n      <div className=\"mixed-chart\">\n        <Chart options={options} series={series} type=\"candlestick\" />\n      </div>\n    </div>\n  );\n}\n\nexport default CandleStickChart;\n"],"mappings":"4hBACA,MAAOA,MAAP,EAA2BC,SAA3B,CAAsCC,QAAtC,KAAsD,OAAtD,CACA,MAAOC,MAAP,KAAkB,kBAAlB,C,2CAEA,QAASC,iBAAT,CAA0BC,KAA1B,CAAsC,CACpC,cAA8BH,QAAQ,CAAc,CAClDI,KAAK,CAAE,CACLC,IAAI,CAAE,aADD,CAD2C,CAIlDC,KAAK,CAAE,CACLC,IAAI,CAAE,8BADD,CAELC,KAAK,CAAE,MAFF,CAJ2C,CAQlDC,KAAK,CAAE,CACLJ,IAAI,CAAE,UADD,CAR2C,CAWlDK,KAAK,CAAE,CACLC,OAAO,CAAE,CACPC,OAAO,CAAE,IADF,CADJ,CAILC,MAAM,CAAE,CACNC,SAAS,CAAE,mBAAUC,KAAV,CAAiB,CAC1B,MAAO,IAAMA,KAAb,CACD,CAHK,CAJH,CAX2C,CAAd,CAAtC,wCAAOC,OAAP,eAAgBC,UAAhB,eAuBA,eAA4BjB,QAAQ,CAAsB,EAAtB,CAApC,yCAAOkB,MAAP,eAAeC,SAAf,eAEApB,SAAS,CAAC,UAAM,CACdqB,QAAQ,GACT,CAFQ,CAEN,EAFM,CAAT,CAIA,GAAMA,SAAQ,4FAAG,+LACQC,MAAK,CAC1B,wHAD0B,CADb,QACTC,QADS,qCAIUA,SAAQ,CAACC,IAAT,EAJV,QAITC,UAJS,eAMTC,WANS,CAMKD,UAAU,CAACE,GAAX,CAAe,SAACC,KAAD,CAAgB,CACjD,GAAMC,UAAS,CAAGD,KAAK,CAACE,IAAN,CAAWC,QAAX,GAAwB,KAA1C,CACA,MAAO,CACLC,CAAC,CAAE,GAAIC,KAAJ,CAASC,MAAM,CAACC,QAAP,CAAgBN,SAAhB,CAAT,CADE,CAELO,CAAC,CAAE,CAACR,KAAK,CAACS,IAAP,CAAaT,KAAK,CAACU,IAAnB,CAAyBV,KAAK,CAACW,GAA/B,CAAoCX,KAAK,CAACY,KAA1C,CAFE,CAAP,CAID,CANmB,CANL,CAcf;AAEApB,SAAS,CAAC,CACR,CACEqB,IAAI,oBAAMf,WAAN,CADN,CADQ,CAAD,CAAT,CAhBe,sDAAH,kBAARL,SAAQ,0CAAd,CAuBA,QAASqB,YAAT,CAAqBjB,UAArB,CAAwC,CACtC,GAAIkB,IAAU,CAAG,EAAjB,CACA,GAAMC,UAAS,CAAGnB,UAAU,CAACoB,MAA7B,CACA,GAAMC,WAAU,CAAGC,IAAI,CAACC,KAAL,CAAYJ,SAAS,CAAG,CAAb,CAAkB,CAA7B,CAAnB,CACA,IAAK,GAAIK,EAAC,CAAGH,UAAb,CAAyBG,CAAC,CAAGL,SAA7B,CAAwCK,CAAC,EAAzC,CAA6C,CAC3CN,GAAG,CAACO,IAAJ,CAAS,CACPlB,CAAC,CAAE,GAAIC,KAAJ,CAASR,UAAU,CAACwB,CAAD,CAAV,CAAcnB,IAAvB,CADI,CAEPM,CAAC,CAAE,CACDX,UAAU,CAACwB,CAAD,CAAV,CAAcZ,IADb,CAEDZ,UAAU,CAACwB,CAAD,CAAV,CAAcX,IAFb,CAGDb,UAAU,CAACwB,CAAD,CAAV,CAAcV,GAHb,CAIDd,UAAU,CAACwB,CAAD,CAAV,CAAcT,KAJb,CAFI,CAAT,EASD,CACD,MAAOG,IAAP,CACD,CAED,mBACE,YAAK,SAAS,CAAC,KAAf,uBACE,YAAK,SAAS,CAAC,aAAf,uBACE,KAAC,KAAD,EAAO,OAAO,CAAE1B,OAAhB,CAAyB,MAAM,CAAEE,MAAjC,CAAyC,IAAI,CAAC,aAA9C,EADF,EADF,EADF,CAOD,CAED,cAAehB,iBAAf"},"metadata":{},"sourceType":"module"}