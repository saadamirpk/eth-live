{"ast":null,"code":"import _regeneratorRuntime from\"/Users/saadamirpk/Documents/GitHub/eth-live/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/saadamirpk/Documents/GitHub/eth-live/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/saadamirpk/Documents/GitHub/eth-live/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Ticker(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];useEffect(function(){var intervalId=setInterval(function(){//assign interval to a variable to clear it.\nsetError(false);fetchData();},500);return function(){return clearInterval(intervalId);};//This is important\n},[]);useEffect(function(){if(data!==null&&data!==undefined){setLoading(false);}},[data]);function randomColor(){var m=Math.floor(Math.random()*10);if(m>5){return\"green\";}else{return\"red\";}}function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,json;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"https://poloniex.com/public?command=returnTicker\",{headers:{Accept:\"application/json\"}});case 3:response=_context.sent;_context.next=6;return response.json();case 6:json=_context.sent;setData(json);console.log(\"Updated\");_context.next=16;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.log(\"Error@\"+_context.t0);setError(true);setData(null);case 16:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return _fetchData.apply(this,arguments);}function roundto4(num){return parseFloat(num).toFixed(4);}return/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"cardContainer\"}),/*#__PURE__*/_jsx(\"div\",{className:\"right\",children:loading?/*#__PURE__*/_jsx(\"h6\",{children:\"Fetching...\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h6\",{children:\"High 24h\"}),/*#__PURE__*/_jsxs(\"h2\",{className:randomColor(),children:[\"$\",roundto4(data.USDT_ETH.high24hr)]}),/*#__PURE__*/_jsx(\"h6\",{children:\"Low 24h\"}),/*#__PURE__*/_jsxs(\"h2\",{className:randomColor(),children:[\"$\",roundto4(data.USDT_ETH.low24hr)]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"left\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"title\",children:error?\"Something Went Wrong\":\"Etheruem Live Stats\"}),/*#__PURE__*/_jsx(\"p\",{className:\"live-icon \"+(error?\"r\":\"g\")}),loading?/*#__PURE__*/_jsx(\"h1\",{children:\"Fetching...\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"$\",roundto4(data.USDT_ETH.last)]}),/*#__PURE__*/_jsxs(\"h4\",{className:randomColor(),children:[roundto4(data.USDT_ETH.percentChange),\"%\"]})]})]})]});}","map":{"version":3,"names":["React","useEffect","useState","Ticker","data","setData","error","setError","loading","setLoading","intervalId","setInterval","fetchData","clearInterval","undefined","randomColor","m","Math","floor","random","fetch","headers","Accept","response","json","console","log","roundto4","num","parseFloat","toFixed","USDT_ETH","high24hr","low24hr","last","percentChange"],"sources":["/Users/saadamirpk/Documents/GitHub/eth-live/src/Components/Ticker.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\n\nexport default function Ticker() {\n  const [data, setData] = useState<any>(null);\n  const [error, setError] = useState(false);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const intervalId = setInterval(() => {\n      //assign interval to a variable to clear it.\n      setError(false);\n      fetchData();\n    }, 500);\n    return () => clearInterval(intervalId); //This is important\n  }, []);\n\n  useEffect(() => {\n    if (data !== null && data !== undefined) {\n      setLoading(false);\n    }\n  }, [data]);\n\n  function randomColor() {\n    const m = Math.floor(Math.random() * 10);\n    if (m > 5) {\n      return \"green\";\n    } else {\n      return \"red\";\n    }\n  }\n\n  async function fetchData() {\n    try {\n      const response = await fetch(\n        \"https://poloniex.com/public?command=returnTicker\",\n        {\n          headers: {\n            Accept: \"application/json\",\n          },\n        }\n      );\n      const json = await response.json();\n      setData(json);\n      console.log(\"Updated\");\n    } catch (err) {\n      console.log(\"Error@\" + err);\n      setError(true);\n      setData(null);\n    }\n  }\n\n  function roundto4(num: string): string {\n    return parseFloat(num).toFixed(4);\n  }\n\n  return (\n    <div className=\"card\">\n      <div className=\"cardContainer\"></div>\n      <div className=\"right\">\n        {loading ? (\n          <h6>Fetching...</h6>\n        ) : (\n          <>\n            <h6>High 24h</h6>\n            <h2 className={randomColor()}>\n              ${roundto4(data.USDT_ETH.high24hr)}\n            </h2>\n            <h6>Low 24h</h6>\n            <h2 className={randomColor()}>\n              ${roundto4(data.USDT_ETH.low24hr)}\n            </h2>\n          </>\n        )}\n      </div>\n      <div className=\"left\">\n        <span className=\"title\">\n          {error ? \"Something Went Wrong\" : \"Etheruem Live Stats\"}\n        </span>\n        <p className={\"live-icon \" + (error ? \"r\" : \"g\")}></p>\n        {loading ? (\n          <h1>Fetching...</h1>\n        ) : (\n          <>\n            <h1>${roundto4(data.USDT_ETH.last)}</h1>\n            <h4 className={randomColor()}>\n              {roundto4(data.USDT_ETH.percentChange)}%\n            </h4>\n          </>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"mappings":"mZAAA,MAAOA,MAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,C,6IAEA,cAAe,SAASC,OAAT,EAAkB,CAC/B,cAAwBD,QAAQ,CAAM,IAAN,CAAhC,wCAAOE,IAAP,eAAaC,OAAb,eACA,eAA0BH,QAAQ,CAAC,KAAD,CAAlC,yCAAOI,KAAP,eAAcC,QAAd,eACA,eAA8BL,QAAQ,CAAC,IAAD,CAAtC,yCAAOM,OAAP,eAAgBC,UAAhB,eAEAR,SAAS,CAAC,UAAM,CACd,GAAMS,WAAU,CAAGC,WAAW,CAAC,UAAM,CACnC;AACAJ,QAAQ,CAAC,KAAD,CAAR,CACAK,SAAS,GACV,CAJ6B,CAI3B,GAJ2B,CAA9B,CAKA,MAAO,kBAAMC,cAAa,CAACH,UAAD,CAAnB,EAAP,CAAwC;AACzC,CAPQ,CAON,EAPM,CAAT,CASAT,SAAS,CAAC,UAAM,CACd,GAAIG,IAAI,GAAK,IAAT,EAAiBA,IAAI,GAAKU,SAA9B,CAAyC,CACvCL,UAAU,CAAC,KAAD,CAAV,CACD,CACF,CAJQ,CAIN,CAACL,IAAD,CAJM,CAAT,CAMA,QAASW,YAAT,EAAuB,CACrB,GAAMC,EAAC,CAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,GAAgB,EAA3B,CAAV,CACA,GAAIH,CAAC,CAAG,CAAR,CAAW,CACT,MAAO,OAAP,CACD,CAFD,IAEO,CACL,MAAO,KAAP,CACD,CACF,CA3B8B,QA6BhBJ,UA7BgB,uIA6B/B,6LAE2BQ,MAAK,CAC1B,kDAD0B,CAE1B,CACEC,OAAO,CAAE,CACPC,MAAM,CAAE,kBADD,CADX,CAF0B,CAFhC,QAEUC,QAFV,qCAUuBA,SAAQ,CAACC,IAAT,EAVvB,QAUUA,IAVV,eAWInB,OAAO,CAACmB,IAAD,CAAP,CACAC,OAAO,CAACC,GAAR,CAAY,SAAZ,EAZJ,iFAcID,OAAO,CAACC,GAAR,CAAY,oBAAZ,EACAnB,QAAQ,CAAC,IAAD,CAAR,CACAF,OAAO,CAAC,IAAD,CAAP,CAhBJ,qEA7B+B,4CAiD/B,QAASsB,SAAT,CAAkBC,GAAlB,CAAuC,CACrC,MAAOC,WAAU,CAACD,GAAD,CAAV,CAAgBE,OAAhB,CAAwB,CAAxB,CAAP,CACD,CAED,mBACE,aAAK,SAAS,CAAC,MAAf,wBACE,YAAK,SAAS,CAAC,eAAf,EADF,cAEE,YAAK,SAAS,CAAC,OAAf,UACGtB,OAAO,cACN,mCADM,cAGN,wCACE,gCADF,cAEE,YAAI,SAAS,CAAEO,WAAW,EAA1B,eACIY,QAAQ,CAACvB,IAAI,CAAC2B,QAAL,CAAcC,QAAf,CADZ,GAFF,cAKE,+BALF,cAME,YAAI,SAAS,CAAEjB,WAAW,EAA1B,eACIY,QAAQ,CAACvB,IAAI,CAAC2B,QAAL,CAAcE,OAAf,CADZ,GANF,GAJJ,EAFF,cAkBE,aAAK,SAAS,CAAC,MAAf,wBACE,aAAM,SAAS,CAAC,OAAhB,UACG3B,KAAK,CAAG,sBAAH,CAA4B,qBADpC,EADF,cAIE,UAAG,SAAS,CAAE,cAAgBA,KAAK,CAAG,GAAH,CAAS,GAA9B,CAAd,EAJF,CAKGE,OAAO,cACN,mCADM,cAGN,wCACE,0BAAMmB,QAAQ,CAACvB,IAAI,CAAC2B,QAAL,CAAcG,IAAf,CAAd,GADF,cAEE,YAAI,SAAS,CAAEnB,WAAW,EAA1B,WACGY,QAAQ,CAACvB,IAAI,CAAC2B,QAAL,CAAcI,aAAf,CADX,OAFF,GARJ,GAlBF,GADF,CAqCD"},"metadata":{},"sourceType":"module"}